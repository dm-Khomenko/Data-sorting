export const bubbleSort=t=>{for(let e=0;e<t.length-1;e++)for(let r=t.length-1;r>e;r--)if(t[r]<t[r-1]){let e=t[r];t[r]=t[r-1],t[r-1]=e}return t};export const selectionSort=t=>{for(let e=0;e<t.length;e++){let r=e;for(let n=e+1;n<t.length;n++)t[r]>t[n]&&(r=n);[t[e],t[r]]=[t[r],t[e]]}return t};export const insertionSort=t=>{for(let e=0;e<t.length;e++){let r=e+1;for(;0!==t[r]&&t[r]<t[r-1];){let e=t[r];t[r]=t[r-1],t[r-1]=e,r--}}return t};export const quickSort=t=>{if(t.length<=1)return t;const e=t[0],r=[],n=[];for(let i=1;i<t.length;i++)t[i]<e?r.push(t[i]):n.push(t[i]);return quickSort(r).concat(e,quickSort(n))};export const mergeSort=function t(e){if(e.length<=1)return e;const r=t(e.slice(0,e.length/2)),n=t(e.slice(e.length/2,e.length));let i=0,o=0;const s=[];for(;i<r.length&&o<n.length;)r[i]===n[o]?(s.push(r[i],n[o]),i++,o++):r[i]<n[o]?(s.push(r[i]),i++):(s.push(n[o]),o++);return i!==r.length?s.concat(r.slice(i,r.length)):o!==n.length?s.concat(n.slice(o,n.length)):s};import*as algos from"./algorithms.js";document.addEventListener("DOMContentLoaded",()=>{new Functionality});class Functionality{constructor(){this.input=document.getElementById("txtInput"),this.codeEl=document.querySelector(".current .readyArray"),this.okBtn=document.getElementById("okBtn"),this.randomBtn=document.getElementById("randomBtn"),this.clearBtn=document.getElementById("clear"),this.bubbleBtn=document.getElementById("bubble"),this.selectionBtn=document.getElementById("selection"),this.insertionBtn=document.getElementById("insertion"),this.quickBtn=document.getElementById("quick"),this.mergeBtn=document.getElementById("merge"),this.compareBtn=document.getElementById("compare"),this.currentArray=[],this.bind(),this.render()}bind(){this.okBtn&&this.okBtn.addEventListener("click",t=>this.onOk(t)),this.randomBtn&&this.randomBtn.addEventListener("click",t=>this.onRandom(t)),this.clearBtn&&this.clearBtn.addEventListener("click",t=>this.onClear(t)),this.bubbleBtn&&this.bubbleBtn.addEventListener("click",t=>this.onBubble(t)),this.selectionBtn&&this.selectionBtn.addEventListener("click",t=>this.onSelection(t)),this.insertionBtn&&this.insertionBtn.addEventListener("click",t=>this.onInsertion(t)),this.quickBtn&&this.quickBtn.addEventListener("click",t=>this.onQuick(t)),this.mergeBtn&&this.mergeBtn.addEventListener("click",t=>this.onMerge(t)),this.compareBtn&&this.compareBtn.addEventListener("click",t=>this.compareAll(t))}onOk(t){t&&t.preventDefault();const e=this.parseInputToArray(this.input?.value||"");this.currentArray=e,this.render()}onRandom(t){t&&t.preventDefault();const e=Math.floor(100*Math.random())+20,r=Array.from({length:e},()=>Math.floor(1e3*Math.random()));this.currentArray=r,this.render()}onBubble(t){t&&t.preventDefault();const e=this.getArrayForAlgorithm(),r=algos.bubbleSort(e);this.currentArray=r,this.render()}onSelection(t){t&&t.preventDefault(),this.currentArray=algos.selectionSort(this.getArrayForAlgorithm()),this.render()}onInsertion(t){t&&t.preventDefault(),this.currentArray=algos.insertionSort(this.getArrayForAlgorithm()),this.render()}onQuick(t){t&&t.preventDefault(),this.currentArray=algos.quickSort(this.getArrayForAlgorithm()),this.render()}onMerge(t){t&&t.preventDefault(),this.currentArray=algos.mergeSort(this.getArrayForAlgorithm()),this.render()}showTimes(t){const e=document.getElementById("timeOutput");e&&(e.innerHTML=`\n\t\t<h3>Algorithm execution time: </h3>\n\t\t<p>If 0ms then < 0.1ms </p>\n\t\t<ul>\n\t\t\t${Object.entries(t).map(([t,e])=>`<li><b>${t}</b>: ${e} ms</li>`).join("")}\n\t\t</ul>\n\t\t`)}compareAll(){const t=this.getArrayForAlgorithm(),e={},r=(r,n)=>{const i=t.slice(),o=performance.now(),s=(n(i),performance.now());e[r]=+(s-o).toFixed(6)};r("Bubble",algos.bubbleSort),r("Selection",algos.selectionSort),r("Insertion",algos.insertionSort),r("Quick",algos.quickSort),r("Merge",algos.mergeSort),this.drawChart(e),this.showTimes(e)}drawChart(t){const e=document.getElementById("myChart");this.chart&&this.chart.destroy(),this.chart=new Chart(e,{type:"bar",data:{labels:Object.keys(t),datasets:[{label:"Time (ms)",data:Object.values(t)}]},options:{responsive:!0,scales:{y:{beginAtZero:!0}}}})}onClear(t){t&&t.preventDefault(),this.currentArray=[],this.render()}parseInputToArray(t){return null==t?[]:Array.isArray(t)?t.map(t=>{const e=Number(t);return Number.isNaN(e)?t:e}):String(t).trim().split(/[\s,]+/).filter(Boolean).map(t=>{const e=Number(t);return Number.isNaN(e)?t:e})}render(){this.codeEl&&(this.codeEl.textContent="["+this.currentArray.join(", ")+"]")}getArrayForAlgorithm(){return Array.isArray(this.currentArray)?this.currentArray.slice():[]}}